<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gwAdmin">
  <select id="selectAllAcceptGroupMemberList" resultType="applocationGroup">
  	select 
  		* 
  	from 
  		applocation_group
	where 
		group_no = #{groupNo} and group_accept='Y'
  
  </select>
  
  <select  id="selectAllWaitingGroupMemberList" resultType="applocationGroup">
     	select 
  		* 
  	from 
  		applocation_group
	where 
		group_no = #{groupNo} and group_accept='N'
  </select>
  
  <update id="updategroupAccept" >

	 update applocation_group SET group_accept ='Y' where group_no =#{groupNo} and member_id in (#{idList})
</update>

  <update id="updategroupAcceptByList"  parameterType="hashmap">
	 update applocation_group SET group_accept ='Y' 
	 where group_no =	
		 #{groupNo}
	 and member_id in (	
	  <foreach collection="idList" item="item" open="" separator="," close="">
              	#{item}
      </foreach>
      )
</update>

	<select id="selectGwGroupPool" resultType="_int">
	select
	group_pool
		from
	tb_group 
	where group_no = #{groupNo}
	
	
	</select>
	
	<select id="selectGwGroupCount" resultType="_int">
	select
		count(*)
		from applocation_group where group_accept='Y' and group_no =#{groupNo}
	
	
	</select>

	<delete id="deletegroupRefuseByList" >
		 delete from applocation_group where group_no =#{groupNo} and member_id in(	
		  <foreach collection="idList" item="item" open="" separator="," close="">
	              	#{item}
	      </foreach>
	      )
	</delete>
	
	<delete id="deleteGwMember">
		delete
  	from 
  		applocation_group
	where 
		group_no = #{groupNo} and group_accept='Y' and member_id = #{gwDeleteMember}
	</delete>
	
	<update id="updateMemberRole" parameterType="hashmap">
	update applocation_group set role = #{memberRole} where group_no=#{groupNo} and member_id=#{memberId}
	</update>
</mapper>